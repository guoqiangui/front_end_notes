# Nodejs 第一天

## what 
特点：  
+ chrome v8 runtime
+ 事件驱动
+ 非阻塞的i/o

优点：高并发非常好

## why
1. 了解后端
2. 书写api
3. 了解前后端的交互流程
4. 全栈

## api接口文档

## js运行环境
+ 浏览器
    - 基本语法
    - bom
    - dom
    - ajax
    - 系统文件数据库（不能，出于安全考虑）
+ 服务器
    - 基本操作
    - 能操作数据库
    - 能操作本地文件

限制语言能力的不是语言本身，而是语言的运行环境（平台）

## nvm
Node版本控制工具，可以切换Node版本

## Node运行环境 REPL
直接在命令行写代码

## 模块化
+ 内置模块（node中提供的可以直接调用）
	- 文件操作
+ 第三方模块
+ 自定义模块
    - 创建模块（一个js文件一个模块）
    - 导出一个模块（module.exports = name）
    - 引用一个模块并且调用
	
### 作业1：打印当前目录的目录树
1. 实现的效果
2. 分析功能点
	+ 当前目录结构
	+ 分辨是文件还是文件夹  
注意点：
+ 错误的回调优先，在回调函数中第一个参数表示错误对象，没有错误的话err对象为null
+ 同步函数，可以用`try catch`在关键地方来捕获错误，防止程序终止执行
+ 对文件的操作可以概括为增删改查
+ `readFile`默认读取出来的是二进制文件流 buffer，想查看的话需要转成utf8
+ 所有的方法都有同步和异步的版本，建议使用异步版本

### 内置模块 url
+ `url` 统一资源定位符
+ 常用的方法：`url.parse()`和`url.format()`可以类比`JSON.parse`和`JSON.stringify`

### 内置模块 querystring
+ 常用的方法：`qs.parse()`和`qs.stringify()`，类比JSON的方法
+ `qs.escape()`用来将字符串进行url编码，即将一些特殊字符和中文转成`%20`这样的形式
+ `qs.unescape()`用来将进行了url编码的字符串解码成原来的字符串

### 邮箱验证码案例
> 第三方模块通过`npm`来下载安装  
`Nodemailer`第三方模块可以实现发邮件

### 作业2：封装一个自定义模块，向固定的邮箱发送固定的信息
要求效果：
```js
xxx.send('邮箱', msg)
```

### 简易爬虫案例
1. 获取目标网站	`http.get`
2. 分析网站内容	`cheerio`：可以使用jq里的选择器及jq语法
3. 获取有效信息 下载或者其他操作  
思路：
0. 什么协议就引什么模块，比如http就引入`http`模块
1. 请求网站数据
2. 利用http模块的方法将网站数据保存到本地文件（大文件的话会自动进行分段存储）

### 作业3：爬取一个网站的图片，并保存到本地
